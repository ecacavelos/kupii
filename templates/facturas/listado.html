{% extends "lotes/base_lotes.html" %}
{% block header_scripts %}
<script type="text/javascript">
	$(document).ready(function() {
		//Cambiar calendario a español
		$.datepicker.regional['es'] = {
			closeText : 'Cerrar',
			prevText : '<Ant',
			nextText : 'Sig>',
			currentText : 'Hoy',
			monthNames : ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
			monthNamesShort : ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
			dayNames : ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
			dayNamesShort : ['Dom', 'Lun', 'Mar', 'Mié', 'Juv', 'Vie', 'Sáb'],
			dayNamesMin : ['Do', 'Lu', 'Ma', 'Mi', 'Ju', 'Vi', 'Sá'],
			weekHeader : 'Sm',
			dateFormat : 'dd/mm/yy',
			firstDay : 1,
			isRTL : false,
			showMonthAfterYear : false,
			yearSuffix : ''
		};
		// Setear idioma al calendario
		$.datepicker.setDefaults($.datepicker.regional['es']);
		
		var fecha_ini = "{{fecha_ini}}";
		var fecha_fin = "{{fecha_fin}}";
		
		$('#fecha_ini').val(fecha_ini);
		$('#fecha_fin').val(fecha_fin);
		
		$('#fecha_ini').mask('##/##/####');
		$("#fecha_ini").datepicker({
			dateFormat : 'dd/mm/yy'
		});
		$('#fecha_fin').mask('##/##/####');
		$("#fecha_fin").datepicker({
			dateFormat : 'dd/mm/yy'
		});
	});
</script>


<script type="text/javascript">
function validar(){
	if($("#tipo_busqueda").val()==0){
		alert("Debe elegir un tipo de busqueda.");
	}
	else{
		if($("#busqueda").val()==""){
			alert("Debe ingresar un nombre para buscar.");
		}else{
			$("#frm_busqueda").submit();
		}
	}
}	
</script>

{% endblock %}
{% block content %}
<div class="gri16 text-izquierda" id="breadcumb">
	<a href="/">Inicio</a> <span class="verde-1">></span>  
	<a href="/facturacion/">Facturacion</a> 
	<span class="verde-1">> Listado de Facturas</span> 
</div>
<div class="clear"></div>
<h1>Listado de Facturas</h1>
<div class="grid_6">
	<form name="frm_busqueda" id="frm_busqueda" method="post" action="{% url 'frontend_home' %}facturacion/listado/">
		{% csrf_token %}
		<table id="lista-categoria" frame="box">
			<tr>
				<th class="acciones" colspan="3"><strong><a href="#" style="color: white;">Filtrar</a></strong></th>
			</tr>
			<th></th><th>Desde:</th><th>Hasta:</th>
			<tr>
				<td> Rango de Fecha: </td>
				<td>
				<input name="fecha_ini" id="fecha_ini" type="text" value="" />
				</td>
				<td>
				<input name="fecha_fin" id="fecha_fin" type="text" value="" />
				</td>
			</tr>
			<tr>
				<td>
				<input type="button" value="Buscar" onclick="validar();" class="historico" style="cursor: pointer"/>
				</td>				
			</tr>
		</table>
	</form>
</div>

<div class="clear"></div>

<div id="listado-item-lote">
	<table width="50%" cellpadding="0" cellspacing="0" class="listado-lotes" align="center">
		<th>Fecha</th><th>Factura Nro.</th><th>Cliente</th><th>Monto</th>
{% for hw in object_list %}
{% if forloop.counter|divisibleby:2 %}
		<tr>
			<td>
				{{hw.fecha}}
			</td>
			<td>
				<a href="{% url 'frontend_home' %}facturacion/listado/{{hw.id}}"><strong>{{hw.numero}}</strong></a>
			</td>
			<td>
				{{hw.cliente.nombres}} {{hw.cliente.apellidos}}
			</td>
			<td>
				{{hw.monto}}
			</td>
		</tr>
		{% else %}
		<tr class="bkg_gris">
		<tr>
			<td>
				{{hw.fecha}}
			</td>
			<td>
				<a href="{% url 'frontend_home' %}facturacion/listado/{{hw.id}}"><strong>{{hw.numero}}</strong></a>
			</td>
			<td>
				{{hw.cliente.nombres}} {{hw.cliente.apellidos}}
			</td>
			<td>
				{{hw.monto}}
			</td>
		</tr>
		{% endif %}
{% endfor %}
<div class="pagination">
    <span class="step-links">
{%if object_list.has_previous%}
<a href="?page={{ object_list.previous_page_number }}{{ultima_busqueda}}"> Anterior</a>
{%endif%}
P&aacute;gina
|{{object_list.number}}|

{%if object_list.has_next%}
<a href="?page={{ object_list.next_page_number }}{{ultima_busqueda}}"> Siguiente</a>
{%endif%}

    </span>
</div>					
<br><br>
						</table>
					</div>
<br>
<div id="footer"><a href="{% url 'frontend_home' %}facturacion" class="boton-verde">Volver al módulo de Facturas</a></div>
{% endblock %}